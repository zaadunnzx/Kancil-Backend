--
-- PostgreSQL database dump
--

-- Dumped from database version 17.4
-- Dumped by pg_dump version 17.4

-- Started on 2025-05-28 11:15:26

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 911 (class 1247 OID 33566)
-- Name: content_type; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.content_type AS ENUM (
    'video',
    'pdf_material',
    'quiz',
    'interactive'
);


ALTER TYPE public.content_type OWNER TO postgres;

--
-- TOC entry 905 (class 1247 OID 33550)
-- Name: course_status; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.course_status AS ENUM (
    'published',
    'draft',
    'archived'
);


ALTER TYPE public.course_status OWNER TO postgres;

--
-- TOC entry 896 (class 1247 OID 33470)
-- Name: enum_chatbot_interactions_ai_response_mode; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.enum_chatbot_interactions_ai_response_mode AS ENUM (
    'text',
    'speech_input',
    'speech_output',
    'voice'
);


ALTER TYPE public.enum_chatbot_interactions_ai_response_mode OWNER TO postgres;

--
-- TOC entry 923 (class 1247 OID 41432)
-- Name: enum_chatbot_interactions_ai_response_type; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.enum_chatbot_interactions_ai_response_type AS ENUM (
    'text',
    'speech_input',
    'speech_output'
);


ALTER TYPE public.enum_chatbot_interactions_ai_response_type OWNER TO postgres;

--
-- TOC entry 893 (class 1247 OID 33462)
-- Name: enum_chatbot_interactions_student_message_type; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.enum_chatbot_interactions_student_message_type AS ENUM (
    'text',
    'speech_input',
    'speech_output',
    'voice',
    'image'
);


ALTER TYPE public.enum_chatbot_interactions_student_message_type OWNER TO postgres;

--
-- TOC entry 872 (class 1247 OID 33378)
-- Name: enum_courses_status; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.enum_courses_status AS ENUM (
    'published',
    'draft',
    'archived'
);


ALTER TYPE public.enum_courses_status OWNER TO postgres;

--
-- TOC entry 869 (class 1247 OID 33371)
-- Name: enum_courses_subject; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.enum_courses_subject AS ENUM (
    'Matematika',
    'IPA',
    'IPS'
);


ALTER TYPE public.enum_courses_subject OWNER TO postgres;

--
-- TOC entry 926 (class 1247 OID 41447)
-- Name: enum_reactions_reaction_type; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.enum_reactions_reaction_type AS ENUM (
    'suka',
    'tidak_suka',
    'susah'
);


ALTER TYPE public.enum_reactions_reaction_type OWNER TO postgres;

--
-- TOC entry 887 (class 1247 OID 33440)
-- Name: enum_student_sub_course_progress_status; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.enum_student_sub_course_progress_status AS ENUM (
    'not_started',
    'in_progress',
    'completed'
);


ALTER TYPE public.enum_student_sub_course_progress_status OWNER TO postgres;

--
-- TOC entry 878 (class 1247 OID 33403)
-- Name: enum_sub_courses_content_type; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.enum_sub_courses_content_type AS ENUM (
    'video',
    'quiz',
    'pdf_material',
    'text',
    'audio',
    'image',
    'pdf'
);


ALTER TYPE public.enum_sub_courses_content_type OWNER TO postgres;

--
-- TOC entry 863 (class 1247 OID 33355)
-- Name: enum_users_role; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.enum_users_role AS ENUM (
    'student',
    'teacher'
);


ALTER TYPE public.enum_users_role OWNER TO postgres;

--
-- TOC entry 917 (class 1247 OID 33584)
-- Name: message_type; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.message_type AS ENUM (
    'text',
    'voice',
    'image'
);


ALTER TYPE public.message_type OWNER TO postgres;

--
-- TOC entry 914 (class 1247 OID 33576)
-- Name: progress_status; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.progress_status AS ENUM (
    'not_started',
    'in_progress',
    'completed'
);


ALTER TYPE public.progress_status OWNER TO postgres;

--
-- TOC entry 920 (class 1247 OID 33592)
-- Name: response_mode; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.response_mode AS ENUM (
    'text',
    'voice'
);


ALTER TYPE public.response_mode OWNER TO postgres;

--
-- TOC entry 908 (class 1247 OID 33558)
-- Name: subject_type; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.subject_type AS ENUM (
    'Matematika',
    'IPA',
    'IPS'
);


ALTER TYPE public.subject_type OWNER TO postgres;

--
-- TOC entry 902 (class 1247 OID 33544)
-- Name: user_role; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.user_role AS ENUM (
    'student',
    'teacher'
);


ALTER TYPE public.user_role OWNER TO postgres;

--
-- TOC entry 234 (class 1255 OID 33539)
-- Name: update_updated_at_column(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.update_updated_at_column() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_updated_at_column() OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 229 (class 1259 OID 41681)
-- Name: SequelizeMeta; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."SequelizeMeta" (
    name character varying(255) NOT NULL
);


ALTER TABLE public."SequelizeMeta" OWNER TO postgres;

--
-- TOC entry 228 (class 1259 OID 33478)
-- Name: chatbot_interactions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.chatbot_interactions (
    id integer NOT NULL,
    student_id uuid NOT NULL,
    sub_course_id integer NOT NULL,
    student_message_text text NOT NULL,
    student_message_type public.enum_chatbot_interactions_student_message_type DEFAULT 'text'::public.enum_chatbot_interactions_student_message_type,
    ai_response_text text NOT NULL,
    ai_response_mode public.enum_chatbot_interactions_ai_response_mode DEFAULT 'text'::public.enum_chatbot_interactions_ai_response_mode,
    interaction_timestamp timestamp with time zone
);


ALTER TABLE public.chatbot_interactions OWNER TO postgres;

--
-- TOC entry 227 (class 1259 OID 33477)
-- Name: chatbot_interactions_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.chatbot_interactions_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.chatbot_interactions_id_seq OWNER TO postgres;

--
-- TOC entry 5060 (class 0 OID 0)
-- Dependencies: 227
-- Name: chatbot_interactions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.chatbot_interactions_id_seq OWNED BY public.chatbot_interactions.id;


--
-- TOC entry 233 (class 1259 OID 41852)
-- Name: comments; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.comments (
    id integer NOT NULL,
    sub_course_id integer NOT NULL,
    id_user uuid NOT NULL,
    content text NOT NULL,
    parent_id integer,
    created_at timestamp with time zone NOT NULL,
    updated_at timestamp with time zone NOT NULL
);


ALTER TABLE public.comments OWNER TO postgres;

--
-- TOC entry 232 (class 1259 OID 41851)
-- Name: comments_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.comments_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.comments_id_seq OWNER TO postgres;

--
-- TOC entry 5061 (class 0 OID 0)
-- Dependencies: 232
-- Name: comments_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.comments_id_seq OWNED BY public.comments.id;


--
-- TOC entry 221 (class 1259 OID 33386)
-- Name: courses; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.courses (
    id integer NOT NULL,
    title character varying(255) NOT NULL,
    subject public.enum_courses_subject NOT NULL,
    kelas integer NOT NULL,
    teacher_id uuid NOT NULL,
    course_code character varying(20) NOT NULL,
    status public.enum_courses_status DEFAULT 'draft'::public.enum_courses_status,
    cover_image_url character varying(255),
    start_date timestamp with time zone,
    end_date timestamp with time zone,
    published_at timestamp with time zone,
    created_at timestamp with time zone NOT NULL,
    updated_at timestamp with time zone NOT NULL,
    description text
);


ALTER TABLE public.courses OWNER TO postgres;

--
-- TOC entry 220 (class 1259 OID 33385)
-- Name: courses_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.courses_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.courses_id_seq OWNER TO postgres;

--
-- TOC entry 5062 (class 0 OID 0)
-- Dependencies: 220
-- Name: courses_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.courses_id_seq OWNED BY public.courses.id;


--
-- TOC entry 231 (class 1259 OID 41834)
-- Name: reactions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.reactions (
    id integer NOT NULL,
    sub_course_id integer NOT NULL,
    id_user uuid NOT NULL,
    reaction_type public.enum_reactions_reaction_type NOT NULL,
    created_at timestamp with time zone NOT NULL,
    updated_at timestamp with time zone NOT NULL
);


ALTER TABLE public.reactions OWNER TO postgres;

--
-- TOC entry 230 (class 1259 OID 41833)
-- Name: reactions_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.reactions_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.reactions_id_seq OWNER TO postgres;

--
-- TOC entry 5063 (class 0 OID 0)
-- Dependencies: 230
-- Name: reactions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.reactions_id_seq OWNED BY public.reactions.id;


--
-- TOC entry 224 (class 1259 OID 33424)
-- Name: student_enrollments; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.student_enrollments (
    student_id uuid NOT NULL,
    course_id integer NOT NULL,
    enrollment_date timestamp with time zone
);


ALTER TABLE public.student_enrollments OWNER TO postgres;

--
-- TOC entry 226 (class 1259 OID 33448)
-- Name: student_sub_course_progress; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.student_sub_course_progress (
    id integer NOT NULL,
    enrollment_student_id uuid NOT NULL,
    enrollment_course_id integer NOT NULL,
    sub_course_id integer NOT NULL,
    status public.enum_student_sub_course_progress_status DEFAULT 'not_started'::public.enum_student_sub_course_progress_status,
    score integer,
    started_at timestamp with time zone,
    completed_at timestamp with time zone,
    last_accessed_at timestamp with time zone
);


ALTER TABLE public.student_sub_course_progress OWNER TO postgres;

--
-- TOC entry 225 (class 1259 OID 33447)
-- Name: student_sub_course_progress_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.student_sub_course_progress_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.student_sub_course_progress_id_seq OWNER TO postgres;

--
-- TOC entry 5064 (class 0 OID 0)
-- Dependencies: 225
-- Name: student_sub_course_progress_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.student_sub_course_progress_id_seq OWNED BY public.student_sub_course_progress.id;


--
-- TOC entry 223 (class 1259 OID 33410)
-- Name: sub_courses; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.sub_courses (
    id integer NOT NULL,
    course_id integer NOT NULL,
    title character varying(255) NOT NULL,
    summary text,
    content_type public.enum_sub_courses_content_type NOT NULL,
    content_url character varying(255) NOT NULL,
    order_in_course integer NOT NULL,
    created_at timestamp with time zone NOT NULL,
    updated_at timestamp with time zone NOT NULL
);


ALTER TABLE public.sub_courses OWNER TO postgres;

--
-- TOC entry 222 (class 1259 OID 33409)
-- Name: sub_courses_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.sub_courses_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.sub_courses_id_seq OWNER TO postgres;

--
-- TOC entry 5065 (class 0 OID 0)
-- Dependencies: 222
-- Name: sub_courses_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.sub_courses_id_seq OWNED BY public.sub_courses.id;


--
-- TOC entry 219 (class 1259 OID 33359)
-- Name: users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.users (
    id_user uuid NOT NULL,
    nama_lengkap character varying(255) NOT NULL,
    email character varying(255) NOT NULL,
    role public.enum_users_role DEFAULT 'student'::public.enum_users_role,
    kelas integer,
    nama_sekolah character varying(255),
    password_hash character varying(255),
    foto_profil_url character varying(255),
    status character varying(50) DEFAULT 'active'::character varying,
    google_id character varying(255),
    last_login timestamp with time zone,
    created_at timestamp with time zone NOT NULL,
    updated_at timestamp with time zone NOT NULL
);


ALTER TABLE public.users OWNER TO postgres;

--
-- TOC entry 4837 (class 2604 OID 33481)
-- Name: chatbot_interactions id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.chatbot_interactions ALTER COLUMN id SET DEFAULT nextval('public.chatbot_interactions_id_seq'::regclass);


--
-- TOC entry 4841 (class 2604 OID 41855)
-- Name: comments id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.comments ALTER COLUMN id SET DEFAULT nextval('public.comments_id_seq'::regclass);


--
-- TOC entry 4832 (class 2604 OID 33389)
-- Name: courses id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.courses ALTER COLUMN id SET DEFAULT nextval('public.courses_id_seq'::regclass);


--
-- TOC entry 4840 (class 2604 OID 41837)
-- Name: reactions id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reactions ALTER COLUMN id SET DEFAULT nextval('public.reactions_id_seq'::regclass);


--
-- TOC entry 4835 (class 2604 OID 33451)
-- Name: student_sub_course_progress id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.student_sub_course_progress ALTER COLUMN id SET DEFAULT nextval('public.student_sub_course_progress_id_seq'::regclass);


--
-- TOC entry 4834 (class 2604 OID 33413)
-- Name: sub_courses id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sub_courses ALTER COLUMN id SET DEFAULT nextval('public.sub_courses_id_seq'::regclass);


--
-- TOC entry 5050 (class 0 OID 41681)
-- Dependencies: 229
-- Data for Name: SequelizeMeta; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public."SequelizeMeta" (name) FROM stdin;
\.


--
-- TOC entry 5049 (class 0 OID 33478)
-- Dependencies: 228
-- Data for Name: chatbot_interactions; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.chatbot_interactions (id, student_id, sub_course_id, student_message_text, student_message_type, ai_response_text, ai_response_mode, interaction_timestamp) FROM stdin;
1	bf4c6d51-15cb-4c45-b526-8b36cfbe94de	6	Bagaimana cara menghitung 2 + 3?	text	Halo! Saya Pak Dino, asisten belajar Kancil AI. \n\nTentang "Bagaimana cara menghitung 2 + 3?":\n\nIni adalah jawaban simulasi dari AI. Dalam implementasi yang sesungguhnya, ini akan terhubung dengan layanan AI seperti:\n- Google Gemini API\n- OpenAI GPT API\n- Atau model AI custom\n\nSaya akan membantu kamu memahami materi "Updated SubCourse Title" dengan lebih baik!\n\nAda yang ingin kamu tanyakan lebih lanjut?	text	2025-05-26 22:19:44.424+07
\.


--
-- TOC entry 5054 (class 0 OID 41852)
-- Dependencies: 233
-- Data for Name: comments; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.comments (id, sub_course_id, id_user, content, parent_id, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 5042 (class 0 OID 33386)
-- Dependencies: 221
-- Data for Name: courses; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.courses (id, title, subject, kelas, teacher_id, course_code, status, cover_image_url, start_date, end_date, published_at, created_at, updated_at, description) FROM stdin;
1	Matematika Kelas 1 - Bilangan	Matematika	1	d1a56ca1-7a12-4da6-8bde-69657e5f19e7	MATH01	published	\N	\N	\N	2025-05-26 15:21:24.015+07	2025-05-26 15:21:24.019+07	2025-05-26 15:21:24.019+07	\N
2	IPA Kelas 2 - Hewan dan Tumbuhan	IPA	2	d1a56ca1-7a12-4da6-8bde-69657e5f19e7	IPA01	published	\N	\N	\N	2025-05-26 15:21:24.024+07	2025-05-26 15:21:24.026+07	2025-05-26 15:21:24.026+07	\N
3	Updated Course Title	Matematika	5	d1a56ca1-7a12-4da6-8bde-69657e5f19e7	RTD5WU	draft	\N	2024-02-01 07:00:00+07	2024-06-15 07:00:00+07	\N	2025-05-26 17:33:20.85+07	2025-05-26 17:33:45.853+07	\N
4	Updated Course Title	Matematika	5	d1a56ca1-7a12-4da6-8bde-69657e5f19e7	56RFW9	published	\N	2024-02-01 07:00:00+07	2024-06-15 07:00:00+07	2025-05-26 21:09:04.347+07	2025-05-26 21:08:21.306+07	2025-05-26 21:09:04.348+07	\N
5	IPS Kelas 3 - Lingkungan Sekitar	IPS	3	d1a56ca1-7a12-4da6-8bde-69657e5f19e7	IPS01	published	\N	\N	\N	2025-05-26 21:30:00+07	2025-05-26 21:30:00+07	2025-05-26 21:30:00+07	\N
6	Bahasa Indonesia Kelas 1 - Membaca Puisi	IPA	1	d1a56ca1-7a12-4da6-8bde-69657e5f19e7	BIN01	draft	\N	\N	\N	\N	2025-05-26 21:31:00+07	2025-05-26 21:31:00+07	\N
\.


--
-- TOC entry 5052 (class 0 OID 41834)
-- Dependencies: 231
-- Data for Name: reactions; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.reactions (id, sub_course_id, id_user, reaction_type, created_at, updated_at) FROM stdin;
\.


--
-- TOC entry 5045 (class 0 OID 33424)
-- Dependencies: 224
-- Data for Name: student_enrollments; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.student_enrollments (student_id, course_id, enrollment_date) FROM stdin;
bf4c6d51-15cb-4c45-b526-8b36cfbe94de	1	2025-05-26 17:32:01.343+07
bf4c6d51-15cb-4c45-b526-8b36cfbe94de	5	2025-05-26 21:33:06.763+07
bf4c6d51-15cb-4c45-b526-8b36cfbe94de	4	2025-05-26 22:17:43.181+07
bf4c6d51-15cb-4c45-b526-8b36cfbe94de	6	2025-05-28 05:32:19.05+07
bf4c6d51-15cb-4c45-b526-8b36cfbe94de	2	2025-05-28 05:33:14.119+07
\.


--
-- TOC entry 5047 (class 0 OID 33448)
-- Dependencies: 226
-- Data for Name: student_sub_course_progress; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.student_sub_course_progress (id, enrollment_student_id, enrollment_course_id, sub_course_id, status, score, started_at, completed_at, last_accessed_at) FROM stdin;
1	bf4c6d51-15cb-4c45-b526-8b36cfbe94de	4	6	completed	85	\N	\N	2025-05-26 22:18:02.093+07
2	bf4c6d51-15cb-4c45-b526-8b36cfbe94de	2	4	completed	8	\N	\N	2025-05-28 05:33:24.25+07
\.


--
-- TOC entry 5044 (class 0 OID 33410)
-- Dependencies: 223
-- Data for Name: sub_courses; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.sub_courses (id, course_id, title, summary, content_type, content_url, order_in_course, created_at, updated_at) FROM stdin;
1	1	Mengenal Angka 1-10	Belajar mengenal dan menulis angka 1 sampai 10	video	https://example.com/video/angka-1-10	1	2025-05-26 15:21:24.032+07	2025-05-26 15:21:24.032+07
2	1	Penjumlahan Sederhana	Belajar penjumlahan angka 1-10	video	https://example.com/video/penjumlahan	2	2025-05-26 15:21:24.037+07	2025-05-26 15:21:24.037+07
3	1	Kuis Angka	Kuis untuk menguji pemahaman angka	quiz	https://example.com/quiz/angka	3	2025-05-26 15:21:24.041+07	2025-05-26 15:21:24.041+07
4	2	Mengenal Hewan Peliharaan	Belajar tentang berbagai hewan peliharaan	video	https://example.com/video/hewan-peliharaan	1	2025-05-26 15:21:24.045+07	2025-05-26 15:21:24.045+07
5	2	Bagian-bagian Tumbuhan	Mempelajari akar, batang, daun, bunga	pdf_material	https://example.com/pdf/bagian-tumbuhan	2	2025-05-26 15:21:24.048+07	2025-05-26 15:21:24.048+07
6	4	Updated SubCourse Title	Updated summary	video	https://example.com/video.mp4	1	2025-05-26 22:09:56.123+07	2025-05-26 22:11:42.701+07
\.


--
-- TOC entry 5040 (class 0 OID 33359)
-- Dependencies: 219
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.users (id_user, nama_lengkap, email, role, kelas, nama_sekolah, password_hash, foto_profil_url, status, google_id, last_login, created_at, updated_at) FROM stdin;
ed05e596-06b4-4e38-b62e-3a71751b0730	Siswa 2	student2@kancil.com	student	3	SD Kancil	$2b$12$1ng.AogTMbo1Q2fK7BBoQuLJNHR.gt/T3CXQ1voxiEZui5pgFqLa.	\N	active	\N	\N	2025-05-26 15:21:24.007+07	2025-05-26 15:21:24.007+07
b9614803-2421-42df-a02f-3d353abc14ce	Siswa 3	student3@kancil.com	student	1	SD Kancil	$2b$12$1ng.AogTMbo1Q2fK7BBoQuLJNHR.gt/T3CXQ1voxiEZui5pgFqLa.	\N	active	\N	\N	2025-05-26 15:21:24.012+07	2025-05-26 15:21:24.012+07
90b510c3-c207-459c-a5c8-6cf5079a7c9f	Test Teacher	testteacher1@example.com	teacher	\N	SD Test	$2b$12$vedMHNXFyyJ8apwN3eKSluDsJWd9PvvYQlSIGUUTYZOOPork6T8Bu	\N	active	\N	2025-05-26 20:55:58.942+07	2025-05-26 20:55:58.915+07	2025-05-26 20:55:58.943+07
b6d3fd3a-f353-4876-b971-faa8d4932d42	Test Student	teststudent@example.com	student	5	SD Test	$2b$12$9x9NlUWgxSnirbAEdbrc4.bFnUsHAh74WLsP9imS1NsdNViXsGDDu	\N	active	\N	2025-05-26 17:30:44.526+07	2025-05-26 17:30:44.514+07	2025-05-26 17:30:44.526+07
6e746464-7299-411b-a54f-ea95b045bba1	Test Teacher	testteacher@example.com	teacher	\N	SD Test	$2b$12$Rl9vOEpBVYwfPzE2dgPQ5.OwjHTdteFHHaZvIhXjWDQb4/SENZf76	\N	active	\N	2025-05-26 17:30:52.779+07	2025-05-26 17:30:52.771+07	2025-05-26 17:30:52.779+07
e82a58c0-2cf3-48cf-953a-a20f4c2a4ef2	Zadun Nafiq	zadunnafiq@gmail.com	student	\N	\N	\N	https://lh3.googleusercontent.com/a/ACg8ocJ4QI-4nPH_cEovCKqLJc6TsBWsg6nOs_456LiiP34lh9lzZKE=s96-c	active	109627917884520957228	2025-05-26 17:46:17.239+07	2025-05-26 17:46:17.229+07	2025-05-26 17:46:17.239+07
834b6973-e5a6-48d4-9415-2de29a2454bd	Zadun Nafiq	zaidunnafik@gmail.com	student	\N	\N	\N	https://lh3.googleusercontent.com/a/ACg8ocIu8a7SrTPlx4pzvpn9lCApndMjyDbyJyHsEFG9vR8snn1bLYz48g=s96-c	active	117930595000789435384	2025-05-26 17:57:07.811+07	2025-05-26 15:24:46.634+07	2025-05-26 17:57:07.811+07
c359216f-13f8-45c0-967f-c0bca0ba3427	Test Student	teststudent4@example.com	student	5	SD Test School	$2b$12$rokqvs5Aof3y338g0zf90.4e2yX3xOHU1LmdFg7czk8/yw08ehZQe	\N	active	\N	2025-05-27 19:40:34.121+07	2025-05-27 19:40:34.097+07	2025-05-27 19:40:34.125528+07
6b7c07ed-887c-4f7e-8137-4d9a0eda8ab5	Test Student	teststudent1@example.com	student	5	SD Test	$2b$12$fQUgzW1vaS3penLlMtQQoOgszVcjAS.5NLRpgAIVyLOC6Wya0eo9a	\N	active	\N	2025-05-26 20:33:36.13+07	2025-05-26 20:33:36.111+07	2025-05-26 20:33:36.13+07
355c588b-2bfc-4bca-bfd4-3d248965ed0d	Test Student	teststudent2@example.com	student	5	SD Test	$2b$12$u7phDg2kWAqYtLoZ4xLBweLcJnr9AiXlB22Qjy.yjTEViwO3mQdKG	\N	active	\N	2025-05-26 22:52:13.17+07	2025-05-26 22:52:13.116+07	2025-05-26 22:52:13.171+07
2cbb524e-670d-4bfa-9ee1-030850ba52f3	Test Student	teststudent3@example.com	student	5	SD Test School	$2b$12$7kdTIAspVi/TI5KrEpn8Z.PEf1I4ds7fEV3yptIsHceJrOhHNjf7O	http://localhost:5001/uploads/profiles/profile-1748275892952-403172116.png	active	\N	2025-05-26 23:11:33.791+07	2025-05-26 23:11:33.761+07	2025-05-26 23:11:33.791+07
d1a56ca1-7a12-4da6-8bde-69657e5f19e7	Updated Name	teacher@kancil.com	teacher	\N	Updated School	$2b$12$fRQyTwaI2d7IZrNB4OWVz.hYJQoqQTd2Z2sJbWnmeOkhTiKGrTUdm	\N	active	\N	2025-05-28 11:11:43.446+07	2025-05-26 15:21:23.506+07	2025-05-28 11:11:43.447168+07
bf4c6d51-15cb-4c45-b526-8b36cfbe94de	Updated Name	student1@kancil.com	student	3	Updated School	$2b$12$1ng.AogTMbo1Q2fK7BBoQuLJNHR.gt/T3CXQ1voxiEZui5pgFqLa.	\N	active	\N	2025-05-28 11:11:51.941+07	2025-05-26 15:21:24+07	2025-05-28 11:11:51.942418+07
\.


--
-- TOC entry 5066 (class 0 OID 0)
-- Dependencies: 227
-- Name: chatbot_interactions_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.chatbot_interactions_id_seq', 1, true);


--
-- TOC entry 5067 (class 0 OID 0)
-- Dependencies: 232
-- Name: comments_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.comments_id_seq', 1, false);


--
-- TOC entry 5068 (class 0 OID 0)
-- Dependencies: 220
-- Name: courses_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.courses_id_seq', 4, true);


--
-- TOC entry 5069 (class 0 OID 0)
-- Dependencies: 230
-- Name: reactions_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.reactions_id_seq', 1, false);


--
-- TOC entry 5070 (class 0 OID 0)
-- Dependencies: 225
-- Name: student_sub_course_progress_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.student_sub_course_progress_id_seq', 2, true);


--
-- TOC entry 5071 (class 0 OID 0)
-- Dependencies: 222
-- Name: sub_courses_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.sub_courses_id_seq', 6, true);


--
-- TOC entry 4872 (class 2606 OID 41685)
-- Name: SequelizeMeta SequelizeMeta_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."SequelizeMeta"
    ADD CONSTRAINT "SequelizeMeta_pkey" PRIMARY KEY (name);


--
-- TOC entry 4868 (class 2606 OID 33487)
-- Name: chatbot_interactions chatbot_interactions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.chatbot_interactions
    ADD CONSTRAINT chatbot_interactions_pkey PRIMARY KEY (id);


--
-- TOC entry 4877 (class 2606 OID 41859)
-- Name: comments comments_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.comments
    ADD CONSTRAINT comments_pkey PRIMARY KEY (id);


--
-- TOC entry 4849 (class 2606 OID 33396)
-- Name: courses courses_course_code_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.courses
    ADD CONSTRAINT courses_course_code_key UNIQUE (course_code);


--
-- TOC entry 4851 (class 2606 OID 33394)
-- Name: courses courses_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.courses
    ADD CONSTRAINT courses_pkey PRIMARY KEY (id);


--
-- TOC entry 4874 (class 2606 OID 41839)
-- Name: reactions reactions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reactions
    ADD CONSTRAINT reactions_pkey PRIMARY KEY (id);


--
-- TOC entry 4862 (class 2606 OID 33428)
-- Name: student_enrollments student_enrollments_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.student_enrollments
    ADD CONSTRAINT student_enrollments_pkey PRIMARY KEY (student_id, course_id);


--
-- TOC entry 4865 (class 2606 OID 33454)
-- Name: student_sub_course_progress student_sub_course_progress_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.student_sub_course_progress
    ADD CONSTRAINT student_sub_course_progress_pkey PRIMARY KEY (id);


--
-- TOC entry 4857 (class 2606 OID 33417)
-- Name: sub_courses sub_courses_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sub_courses
    ADD CONSTRAINT sub_courses_pkey PRIMARY KEY (id);


--
-- TOC entry 4845 (class 2606 OID 33369)
-- Name: users users_email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_email_key UNIQUE (email);


--
-- TOC entry 4847 (class 2606 OID 33367)
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id_user);


--
-- TOC entry 4869 (class 1259 OID 33597)
-- Name: idx_chat_student; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_chat_student ON public.chatbot_interactions USING btree (student_id);


--
-- TOC entry 4870 (class 1259 OID 33598)
-- Name: idx_chat_subcourse; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_chat_subcourse ON public.chatbot_interactions USING btree (sub_course_id);


--
-- TOC entry 4852 (class 1259 OID 33535)
-- Name: idx_courses_code; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_courses_code ON public.courses USING btree (course_code);


--
-- TOC entry 4853 (class 1259 OID 33534)
-- Name: idx_courses_status; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_courses_status ON public.courses USING btree (status);


--
-- TOC entry 4854 (class 1259 OID 33533)
-- Name: idx_courses_teacher; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_courses_teacher ON public.courses USING btree (teacher_id);


--
-- TOC entry 4859 (class 1259 OID 33538)
-- Name: idx_enrollments_course; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_enrollments_course ON public.student_enrollments USING btree (course_id);


--
-- TOC entry 4860 (class 1259 OID 33537)
-- Name: idx_enrollments_student; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_enrollments_student ON public.student_enrollments USING btree (student_id);


--
-- TOC entry 4855 (class 1259 OID 33536)
-- Name: idx_subcourses_course; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_subcourses_course ON public.sub_courses USING btree (course_id);


--
-- TOC entry 4842 (class 1259 OID 33531)
-- Name: idx_users_email; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_users_email ON public.users USING btree (email);


--
-- TOC entry 4843 (class 1259 OID 33532)
-- Name: idx_users_role; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_users_role ON public.users USING btree (role);


--
-- TOC entry 4875 (class 1259 OID 41850)
-- Name: reactions_sub_course_id_user_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX reactions_sub_course_id_user_id ON public.reactions USING btree (sub_course_id, id_user);


--
-- TOC entry 4863 (class 1259 OID 41879)
-- Name: student_enrollments_student_id_course_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX student_enrollments_student_id_course_id ON public.student_enrollments USING btree (student_id, course_id);


--
-- TOC entry 4866 (class 1259 OID 33460)
-- Name: uq_student_subcourse_progress; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX uq_student_subcourse_progress ON public.student_sub_course_progress USING btree (enrollment_student_id, enrollment_course_id, sub_course_id);


--
-- TOC entry 4858 (class 1259 OID 33423)
-- Name: uq_sub_courses_course_order; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX uq_sub_courses_course_order ON public.sub_courses USING btree (course_id, order_in_course);


--
-- TOC entry 4892 (class 2620 OID 33600)
-- Name: courses update_courses_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_courses_updated_at BEFORE UPDATE ON public.courses FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- TOC entry 4894 (class 2620 OID 33602)
-- Name: student_sub_course_progress update_progress_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_progress_updated_at BEFORE UPDATE ON public.student_sub_course_progress FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- TOC entry 4893 (class 2620 OID 33601)
-- Name: sub_courses update_sub_courses_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_sub_courses_updated_at BEFORE UPDATE ON public.sub_courses FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- TOC entry 4891 (class 2620 OID 33599)
-- Name: users update_users_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_users_updated_at BEFORE UPDATE ON public.users FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- TOC entry 4884 (class 2606 OID 33521)
-- Name: chatbot_interactions chatbot_interactions_student_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.chatbot_interactions
    ADD CONSTRAINT chatbot_interactions_student_id_fkey FOREIGN KEY (student_id) REFERENCES public.users(id_user);


--
-- TOC entry 4885 (class 2606 OID 33493)
-- Name: chatbot_interactions chatbot_interactions_sub_course_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.chatbot_interactions
    ADD CONSTRAINT chatbot_interactions_sub_course_id_fkey FOREIGN KEY (sub_course_id) REFERENCES public.sub_courses(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 4888 (class 2606 OID 41870)
-- Name: comments comments_parent_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.comments
    ADD CONSTRAINT comments_parent_id_fkey FOREIGN KEY (parent_id) REFERENCES public.comments(id) ON UPDATE CASCADE ON DELETE SET NULL;


--
-- TOC entry 4889 (class 2606 OID 41860)
-- Name: comments comments_sub_course_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.comments
    ADD CONSTRAINT comments_sub_course_id_fkey FOREIGN KEY (sub_course_id) REFERENCES public.sub_courses(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 4890 (class 2606 OID 41865)
-- Name: comments comments_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.comments
    ADD CONSTRAINT comments_user_id_fkey FOREIGN KEY (id_user) REFERENCES public.users(id_user) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 4878 (class 2606 OID 33511)
-- Name: courses courses_teacher_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.courses
    ADD CONSTRAINT courses_teacher_id_fkey FOREIGN KEY (teacher_id) REFERENCES public.users(id_user);


--
-- TOC entry 4886 (class 2606 OID 41840)
-- Name: reactions reactions_sub_course_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reactions
    ADD CONSTRAINT reactions_sub_course_id_fkey FOREIGN KEY (sub_course_id) REFERENCES public.sub_courses(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 4887 (class 2606 OID 41845)
-- Name: reactions reactions_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reactions
    ADD CONSTRAINT reactions_user_id_fkey FOREIGN KEY (id_user) REFERENCES public.users(id_user) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 4880 (class 2606 OID 33434)
-- Name: student_enrollments student_enrollments_course_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.student_enrollments
    ADD CONSTRAINT student_enrollments_course_id_fkey FOREIGN KEY (course_id) REFERENCES public.courses(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 4881 (class 2606 OID 33516)
-- Name: student_enrollments student_enrollments_student_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.student_enrollments
    ADD CONSTRAINT student_enrollments_student_id_fkey FOREIGN KEY (student_id) REFERENCES public.users(id_user);


--
-- TOC entry 4882 (class 2606 OID 33526)
-- Name: student_sub_course_progress student_sub_course_progress_enrollment_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.student_sub_course_progress
    ADD CONSTRAINT student_sub_course_progress_enrollment_fkey FOREIGN KEY (enrollment_student_id, enrollment_course_id) REFERENCES public.student_enrollments(student_id, course_id);


--
-- TOC entry 4883 (class 2606 OID 33455)
-- Name: student_sub_course_progress student_sub_course_progress_sub_course_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.student_sub_course_progress
    ADD CONSTRAINT student_sub_course_progress_sub_course_id_fkey FOREIGN KEY (sub_course_id) REFERENCES public.sub_courses(id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- TOC entry 4879 (class 2606 OID 33418)
-- Name: sub_courses sub_courses_course_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sub_courses
    ADD CONSTRAINT sub_courses_course_id_fkey FOREIGN KEY (course_id) REFERENCES public.courses(id) ON UPDATE CASCADE ON DELETE CASCADE;


-- Completed on 2025-05-28 11:15:27

--
-- PostgreSQL database dump complete
--

